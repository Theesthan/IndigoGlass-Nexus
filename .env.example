# =============================================================================
# IndigoGlass Nexus - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars

# -----------------------------------------------------------------------------
# API Service
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# MySQL (Curated Warehouse)
# -----------------------------------------------------------------------------
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_DATABASE=indigoglass
MYSQL_USER=indigoglass
MYSQL_PASSWORD=indigoglass_password
MYSQL_ROOT_PASSWORD=root_password

# SQLAlchemy connection string (constructed from above)
DATABASE_URL=mysql+asyncmy://${MYSQL_USER}:${MYSQL_PASSWORD}@${MYSQL_HOST}:${MYSQL_PORT}/${MYSQL_DATABASE}

# -----------------------------------------------------------------------------
# MongoDB (Raw Events)
# -----------------------------------------------------------------------------
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_DATABASE=indigoglass_raw
MONGODB_USER=indigoglass
MONGODB_PASSWORD=indigoglass_mongo_password
MONGODB_URL=mongodb://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_DATABASE}?authSource=admin

# -----------------------------------------------------------------------------
# Neo4j (Supply Network Graph)
# -----------------------------------------------------------------------------
NEO4J_HOST=neo4j
NEO4J_BOLT_PORT=7687
NEO4J_HTTP_PORT=7474
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j_password
NEO4J_URI=bolt://${NEO4J_HOST}:${NEO4J_BOLT_PORT}

# -----------------------------------------------------------------------------
# Redis (Cache + Celery Broker)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/1
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/2

# -----------------------------------------------------------------------------
# MinIO (S3-Compatible Storage)
# -----------------------------------------------------------------------------
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET_MODELS=models
MINIO_BUCKET_EXPORTS=exports

# S3 compatible endpoint
S3_ENDPOINT_URL=http://${MINIO_HOST}:${MINIO_PORT}
S3_ACCESS_KEY=${MINIO_ROOT_USER}
S3_SECRET_KEY=${MINIO_ROOT_PASSWORD}
S3_REGION=us-east-1

# -----------------------------------------------------------------------------
# Optimizer Service
# -----------------------------------------------------------------------------
OPTIMIZER_HOST=optimizer
OPTIMIZER_PORT=8080
OPTIMIZER_URL=http://${OPTIMIZER_HOST}:${OPTIMIZER_PORT}
OPTIMIZER_TIMEOUT_SECONDS=30
OPTIMIZER_MAX_STOPS=100

# -----------------------------------------------------------------------------
# ML Configuration
# -----------------------------------------------------------------------------
ML_MODEL_CACHE_TTL=3600
ML_FORECAST_HORIZON_DAYS=14
ML_TRAIN_LOOKBACK_DAYS=365
ML_RANDOM_SEED=42

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=indigoglass-api
PROMETHEUS_METRICS_PORT=9090

# -----------------------------------------------------------------------------
# Frontend (Next.js)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1
NEXT_PUBLIC_APP_NAME=IndigoGlass Nexus
